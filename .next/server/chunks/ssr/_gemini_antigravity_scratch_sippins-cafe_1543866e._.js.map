{"version":3,"sources":["../../../../../../../../.gemini/antigravity/scratch/sippins-cafe/components/ui/card.tsx","../../../../../../../../.gemini/antigravity/scratch/sippins-cafe/components/ui/badge.tsx","../../../../../../../../.gemini/antigravity/scratch/sippins-cafe/app/admin/page.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn(\"leading-none font-semibold\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn(\"px-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n","import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { Slot } from \"radix-ui\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\r\n        ghost: \"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 [a&]:hover:underline\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Badge({\r\n  className,\r\n  variant = \"default\",\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"span\"> &\r\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\r\n  const Comp = asChild ? Slot.Root : \"span\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"badge\"\r\n      data-variant={variant}\r\n      className={cn(badgeVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n","\r\n\"use client\";\r\n\r\nimport useSWR from \"swr\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, CheckCircle2, Clock, ChefHat } from \"lucide-react\";\r\nimport { toast } from \"sonner\"; // We'll need to install sonner or use standard alert\r\n\r\n// Fetcher function for SWR\r\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\r\n\r\ninterface OrderItem {\r\n    id: string;\r\n    quantity: number;\r\n    menuItem: {\r\n        name: string;\r\n        price: number;\r\n    };\r\n}\r\n\r\ninterface Order {\r\n    id: string;\r\n    customerName: string;\r\n    tableNumber: string;\r\n    status: string;\r\n    totalAmount: number;\r\n    items: OrderItem[];\r\n    createdAt: string;\r\n    specialNote?: string;\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n    const { data: orders, error, mutate } = useSWR<Order[]>(\"/api/admin/orders\", fetcher, {\r\n        refreshInterval: 5000, // Poll every 5 seconds\r\n    });\r\n\r\n    const updateStatus = async (id: string, status: string) => {\r\n        try {\r\n            await fetch(`/api/admin/orders/${id}`, {\r\n                method: \"PATCH\",\r\n                body: JSON.stringify({ status }),\r\n            });\r\n            mutate(); // Refresh data\r\n        } catch (error) {\r\n            console.error(\"Failed to update status\", error);\r\n        }\r\n    };\r\n\r\n    if (error) return <div>Failed to load orders</div>;\r\n    if (!orders) return <div className=\"flex items-center justify-center h-full\"><Loader2 className=\"h-8 w-8 animate-spin\" /></div>;\r\n\r\n    return (\r\n        <div className=\"p-8 space-y-8 bg-gray-50 min-h-screen\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-3xl font-bold tracking-tight\">Dashboard</h2>\r\n                <div className=\"flex items-center space-x-2\">\r\n                    <Badge variant=\"outline\" className=\"bg-green-100 text-green-800\">\r\n                        Live Object: {orders.length} Active Orders\r\n                    </Badge>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {orders.map((order) => (\r\n                    <Card key={order.id} className=\"border-l-4 border-l-blue-500 shadow-md hover:shadow-lg transition-shadow\">\r\n                        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium\">\r\n                                Order #{order.id.slice(-4)}\r\n                            </CardTitle>\r\n                            <Badge variant={order.status === 'PENDING' ? 'destructive' : 'default'}>\r\n                                {order.status}\r\n                            </Badge>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold mb-1\">{order.tableNumber ? `Table ${order.tableNumber}` : 'Parcel'}</div>\r\n                            <p className=\"text-xs text-muted-foreground mb-4\">\r\n                                {new Date(order.createdAt).toLocaleTimeString()} • {order.customerName || 'Guest'}\r\n                            </p>\r\n\r\n                            <div className=\"space-y-2 mb-4\">\r\n                                {order.items.map((item) => (\r\n                                    <div key={item.id} className=\"flex justify-between text-sm\">\r\n                                        <span>{item.quantity}x {item.menuItem.name}</span>\r\n                                        <span className=\"font-mono\">₹{item.menuItem.price * item.quantity}</span>\r\n                                    </div>\r\n                                ))}\r\n                                {order.specialNote && (\r\n                                    <div className=\"text-xs bg-yellow-100 p-2 rounded text-yellow-800 mt-2\">\r\n                                        Note: {order.specialNote}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"border-t pt-2 mt-2 flex justify-between items-center font-bold\">\r\n                                <span>Total</span>\r\n                                <span>₹{order.totalAmount}</span>\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-end gap-2 mt-4\">\r\n                                {order.status === 'PENDING' && (\r\n                                    <Button size=\"sm\" onClick={() => updateStatus(order.id, 'PREPARING')}>\r\n                                        <ChefHat className=\"w-4 h-4 mr-1\" /> Start\r\n                                    </Button>\r\n                                )}\r\n                                {order.status === 'PREPARING' && (\r\n                                    <Button size=\"sm\" onClick={() => updateStatus(order.id, 'COMPLETED')} variant=\"default\" className=\"bg-green-600 hover:bg-green-700\">\r\n                                        <CheckCircle2 className=\"w-4 h-4 mr-1\" /> Ready\r\n                                    </Button>\r\n                                )}\r\n                                {order.status === 'COMPLETED' && (\r\n                                    <Button size=\"sm\" variant=\"outline\" disabled>\r\n                                        Done\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                ))}\r\n                {orders.length === 0 && (\r\n                    <div className=\"col-span-full text-center py-20 text-gray-400\">\r\n                        <p>No active orders right now.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}